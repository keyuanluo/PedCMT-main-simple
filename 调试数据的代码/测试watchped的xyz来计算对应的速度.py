import numpy as np

# 1) 将给定的表格数据放入数组（示例）
data = [
    (97770683621872, -0.29093918,  -0.24405003,  0.28296947),
    (97770704007653, -0.27941525,  -0.1392734,   0.39083672),
    (97770724393382, -0.2515341,    0.032990456, 0.28958416),
    (97770744779111, -0.111670755,  0.013431549, 0.1844759),
    (97770765164840, -0.18865073,  -0.14811921,  0.20023823),
    (97770785550622, -0.19586098,  -0.09587932,  0.2792921),
    (97770805936351, -0.1477282,   -0.09872961,  0.30469036),
    (97770826322080, -0.16373166,   0.05340576,  0.23897648),
    (97770846707809, -0.06628847,  -0.006177664, 0.17744541),
    (97770867093590, -0.1483989,   -0.078956366, 0.19736195),
    (97770887479320, -0.3174689,   -0.18472147,  0.17108727),
    (97770907865049, -0.2773733,   -0.045700073, 0.08628273),
    (97770928006663, -0.21162689,   0.038844824, 0.03783989),
    (97770948087236, -0.11027902,  -0.2542622,  -0.20890808),
    (97770968076247, -0.012322038, -0.18847561, -0.28380203),
    (97770988095778,  0.13143957,  -0.033005238,-0.16744518),
    (97771008084788,  0.16010694,  -0.055312634,-0.1391449),
    (97771028104320,  0.11447412,  -0.27890146,  0.0020980835),
    (97771048093330, -0.21071953,  -0.155509,    0.23848724)
]

# 2) 拆分时间戳和加速度
ts = np.array([row[0] for row in data], dtype=np.float64)  # 时间戳
acc = np.array([[row[1], row[2], row[3]] for row in data], dtype=np.float64)  # (x, y, z) 加速度

n = len(ts)
v = np.zeros((n, 3), dtype=np.float64)  # 存放每个时刻的速度向量 (vx, vy, vz)
speeds = np.zeros(n, dtype=np.float64)  # 存放每个时刻的速度标量

# 3) 简单欧拉积分：v_{i+1} = v_i + a_i * dt
#    其中 dt = (t_{i+1} - t_i) × 1e-8 (假设这样能得到正确的秒数)
for i in range(n - 1):
    dt = (ts[i+1] - ts[i]) * 1e-8
    v[i+1] = v[i] + acc[i] * dt



# 4) 计算每个时刻速度向量的模长
for i in range(n):
    speeds[i] = np.linalg.norm(v[i])

# 5) 输出结果
for i in range(n):
    print(f"Index={i}, Time={ts[i]}, Velocity={v[i]}, Speed={speeds[i]:.4f} m/s")
